"use strict";var t=require("../../common/vendor.js");const i={components:{newsPage:()=>"./news-page.js"},data:()=>({tabList:[{id:"tab01",name:"最新",newsid:0},{id:"tab02",name:"大公司",newsid:23},{id:"tab03",name:"内容",newsid:223},{id:"tab04",name:"消费",newsid:221},{id:"tab05",name:"娱乐",newsid:225},{id:"tab06",name:"区块链",newsid:208}],tabIndex:0,cacheTab:[],scrollInto:"",navigateFlag:!1,indicatorLineLeft:0,indicatorLineWidth:0,isTap:!1}),onReady(){this._lastTabIndex=0,this.swiperWidth=0,this.tabbarWidth=0,this.tabListSize={},this._touchTabIndex=0,this.pageList=[];for(var t=0;t<this.tabList.length;t++){let i=this.$refs["page"+t];Array.isArray(i)?this.pageList.push(i[0]):this.pageList.push(i)}this.switchTab(this.tabIndex),this.selectorQuery()},methods:{ontabtap(t){let i=t.target.dataset.current||t.currentTarget.dataset.current;this.isTap=!0;var a=this.tabListSize[i];this.updateIndicator(a.left,a.width),this._touchTabIndex=i,this.switchTab(i)},onswiperchange(t){},onswiperscroll(t){if(!this.isTap){var i=t.detail.dx,a=this._lastTabIndex;if(i>1?a++:i<-1&&a--,!(a===this._lastTabIndex||a<0||a>this.pageList.length-1)){0===this.pageList[a].dataList.length&&this.loadTabData(a);var e=Math.abs(this.swiperWidth/i),s=this.tabListSize[this._lastTabIndex],h=this.tabListSize[a],n=s.left+(h.left-s.left)/e,d=s.width+(h.width-s.width)/e;this.updateIndicator(n,d)}}},animationfinish(t){let i=t.detail.current;this._touchTabIndex===i&&(this.isTap=!1),this._lastTabIndex=i,this.switchTab(i),this.updateIndicator(this.tabListSize[i].left,this.tabListSize[i].width)},selectorQuery(){t.index.createSelectorQuery().in(this).select(".tab-box").fields({dataset:!0,size:!0},(t=>{this.swiperWidth=t.width})).exec(),t.index.createSelectorQuery().in(this).selectAll(".uni-tab-item").boundingClientRect((t=>{t.forEach((t=>{this.tabListSize[t.dataset.id]=t})),this.updateIndicator(this.tabListSize[this.tabIndex].left,this.tabListSize[this.tabIndex].width)})).exec()},getElementSize(t,i,a){t.getComponentRect(i,(t=>{this.tabListSize[a]=t.size}))},updateIndicator(t,i){this.indicatorLineLeft=t,this.indicatorLineWidth=i},switchTab(t){if(0===this.pageList[t].dataList.length&&this.loadTabData(t),this.tabIndex!==t){if(this.pageList[this.tabIndex].dataList.length>100){this.cacheTab.indexOf(this.tabIndex)<0&&this.cacheTab.push(this.tabIndex)}if(this.tabIndex=t,this.scrollInto=this.tabList[t].id,this.cacheTab.length>3){let t=this.cacheTab[0];this.clearTabData(t),this.cacheTab.splice(0,1)}}},scrollTabTo(t){const i=this.$refs["tabitem"+t][0];let a=0;t>0&&(a=this.tabbarWidth/2-this.tabListSize[t].width/2,this.tabListSize[t].right<this.tabbarWidth/2&&(a=this.tabListSize[0].width)),dom.scrollToElement(i,{offset:-a})},loadTabData(t){this.pageList[t].loadData()},clearTabData(t){this.pageList[t].clear()}}};if(!Array){t.resolveComponent("newsPage")()}var a=t._export_sfc(i,[["render",function(i,a,e,s,h,n){return{a:t.f(h.tabList,((i,a,e)=>({a:t.t(i.name),b:t.n(h.tabIndex==a?"uni-tab-item-title-active":""),c:i.id,d:i.id,e:"tabitem"+a,f:a,g:a,h:t.o(((...t)=>n.ontabtap&&n.ontabtap(...t)),i.id)}))),b:t.n(h.isTap?"scroll-view-animation":""),c:h.indicatorLineLeft+"px",d:h.indicatorLineWidth+"px",e:h.scrollInto,f:t.f(h.tabList,((i,a,e)=>({a:t.sr("page"+a,"4927853e-0-"+e,{f:1}),b:"page"+a,c:"4927853e-0-"+e,d:t.p({nid:i.newsid}),e:a}))),g:h.tabIndex,h:t.o(((...t)=>n.onswiperchange&&n.onswiperchange(...t))),i:t.o(((...t)=>n.onswiperscroll&&n.onswiperscroll(...t))),j:t.o(((...t)=>n.animationfinish&&n.animationfinish(...t))),k:t.o(((...t)=>n.animationfinish&&n.animationfinish(...t)))}}]]);wx.createPage(a);
